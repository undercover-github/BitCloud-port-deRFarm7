/**************************************************************************//**
\file  wdtCtrl.h

\brief Declaration of the WDT interface.

\author
    Atmel Corporation: http://www.atmel.com \n
    Support email: avr@atmel.com

  Copyright (c) 2008-2012, Atmel Corporation. All rights reserved.
  Licensed under Atmel's Limited License Agreement (BitCloudTM).

\internal
  History:
    30/08/07 A. Khromykh - Created
*******************************************************************************/
/******************************************************************************
 *   WARNING: CHANGING THIS FILE MAY AFFECT CORE FUNCTIONALITY OF THE STACK.  *
 *   EXPERT USERS SHOULD PROCEED WITH CAUTION.                                *
 ******************************************************************************/

#ifndef _HALWDT_H
#define _HALWDT_H

/******************************************************************************
                   Includes section
******************************************************************************/
#include <AT91SAM7X512.h>
#include <types.h>

/******************************************************************************
                   Define(s) section
******************************************************************************/
#define KEY (0xA5 << 24)

/******************************************************************************
                   Prototypes section
******************************************************************************/
/******************************************************************************
wdt interrupt handler
******************************************************************************/
void wdtHandler(void);

/******************************************************************************
                   Inline static functions section
******************************************************************************/
/******************************************************************************
reset and reload wdt counter
******************************************************************************/
INLINE void wdt_reset(void)
{
  AT91C_BASE_WDTC->WDTC_WDCR = KEY | AT91C_WDTC_WDRSTT;
}

/******************************************************************************
                   Prototypes section
******************************************************************************/
/******************************************************************************
Software reset.
******************************************************************************/
void halWarmReset(void);

/******************************************************************************
Read reset reason.
Returns:
  reset reason.
******************************************************************************/
uint8_t halReadResetReason(void);

#endif /*_HALWDT_H*/
// eof halWdt.h
